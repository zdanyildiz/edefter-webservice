var languageCode=document.documentElement.lang;function resetTurnstile(){const e=document.getElementById("turnstile-container");if("undefined"!=typeof turnstile&&e)try{turnstile.reset(e)}catch(e){}}function validateEmailAddress(e){if(!e.includes("@"))return!1;if(!e.includes("."))return!1;return!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function validatePhoneNumber(e){return 10===e.length&&(!(e.startsWith("+90")||e.startsWith("90")||e.startsWith("0"))&&!!/^\d+$/.test(e))}function validatePassword(e){return!(e.length<8)&&(!(e.length>20)&&(!!/[a-z]/.test(e)&&!!/[A-Z]/.test(e)))}document.querySelector("#remind-password").addEventListener("click",(function(){document.querySelector(".remind-password-form-modal").classList.add("active")})),document.querySelector(".close-remind-password-form-modal").addEventListener("click",(function(){document.querySelector(".remind-password-form-modal").classList.remove("active")})),document.querySelector("#remindPasswordForm").addEventListener("submit",(function(e){e.preventDefault();var r=document.querySelector("#remindPasswordForm"),t=r.querySelector('input[name="action"]').value,s=r.querySelector("#languageCode").value,o=r.querySelector("#email-remindPasswordForm").value,a=r.querySelector("#websites-remindPasswordForm").value,n=r.querySelector("#cf-token-remind-password-form"),u=r.querySelector("#csrf_token-remind-password-form").value;if(!validateEmailAddress(o))return showPopup("error","Geçersiz e-posta adresi"),r.querySelector("#email").focus(),void e.preventDefault();var l=new FormData;l.append("action",t),l.append("languageCode",s),l.append("email",o),l.append("websites",a),l.append("cf-turnstile-response",n.value),l.append("csrf_token",u);var m=new XMLHttpRequest;m.open("POST","/?/control/member/post/remindPasswordByEmail",!0),m.setRequestHeader("X-Requested-With","XMLHttpRequest"),m.send(l),m.onload=function(){200===m.status?(response=JSON.parse(m.responseText),$status=response.status,$message=response.message,showPopup($status,$message),"success"===$status&&document.querySelector(".remind-password-form-modal").classList.remove("active")):showPopup("error","Bir hata oluştu. Lütfen tekrar deneyin")}})),document.querySelector("#memberReqisterForm").addEventListener("submit",(function(e){e.preventDefault();var r=document.querySelector("#memberReqisterForm"),t=r.querySelector("#websites-memberReqisterForm").value,s=r.querySelector('input[name="action"]').value,o=r.querySelector("#email-memberReqisterForm").value;if(!validateEmailAddress(o))return showPopup("error","Geçersiz e-posta adresi"),r.querySelector("#email-memberReqisterForm").focus(),void e.preventDefault();var a=r.querySelector("#phone-memberReqisterForm").value;if(!validatePhoneNumber(a))return showPopup("error","Geçersiz telefon numarası. Telefon numarası 10 haneli olmalı ve +90, 90 veya 0 ile başlamamalı."),r.querySelector("#phone-memberReqisterForm").focus(),void e.preventDefault();var n=r.querySelector("#name-memberReqisterForm").value,u=r.querySelector("#surname-memberReqisterForm").value;if(""===n||""===u)return showPopup("error","Ad ve Soyad alanları boş olamaz"),r.querySelector("#name-memberReqisterForm").focus(),void e.preventDefault();var l=r.querySelector("#password-memberReqisterForm").value;if(!validatePassword(l))return showPopup("error","Şifre en az 8 karakterden oluşmalı, en fazla 20 karakter olmalı ve en az bir küçük harf, en az bir büyük harf olmalı"),r.querySelector("#password-memberReqisterForm").focus(),void e.preventDefault();var m=r.querySelector("#csrf_token-register-form").value,i=r.querySelector("#cf-token-register-form").value,d=new FormData;d.append("action",s),d.append("languageCode",languageCode),d.append("name",n),d.append("surname",u),d.append("email",o),d.append("phone",a),d.append("password",l),d.append("csrf_token",m),d.append("websites",t),d.append("cf-turnstile-response",i);var p=new XMLHttpRequest;p.open("POST","/?/control/member/post/register",!0),p.setRequestHeader("X-Requested-With","XMLHttpRequest"),p.send(d),p.onload=function(){200===p.status?(response=JSON.parse(p.responseText),$status=response.status,$message=response.message,showPopup($status,$message),"success"===$status&&gtag("event","sign_up",{method:"E-posta",event_callback:function(){document.location.href="/"},event_timeout:2e3}),"success"===$status&&!0===response.autoLogin&&setTimeout((function(){window.location.href=response.redirectUrl||"/"}),2e3)):showPopup("error","Bir hata oluştu. Lütfen tekrar deneyin"),resetTurnstile()}})),document.querySelector("#memberLoginForm").addEventListener("submit",(function(e){e.preventDefault();let r=document.querySelector("#memberLoginForm");var t=r.querySelector("#websites-memberLoginForm").value;let s=r.querySelector('input[name="action"]').value,o=r.querySelector("#email-memberLoginForm").value,a=r.querySelector("#password-memberLoginForm").value,n=r.querySelector("#remember").value;var u=r.querySelector("#csrf_token-login-form").value,l=r.querySelector("#cf-token-login-form").value;let m=new FormData;m.append("action",s),m.append("languageCode",languageCode),m.append("email",o),m.append("password",a),m.append("remember",n),m.append("csrf_token",u),m.append("websites",t),m.append("cf-turnstile-response",l);var i=new XMLHttpRequest;i.open("POST","/?/control/member/post/login",!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(m),i.onload=function(){if(200===i.status){if(response=JSON.parse(i.responseText),$status=response.status,$message=response.message,showPopup($status,$message),"success"===$status){gtag("event","login",{method:"E-posta",event_callback:function(){document.location.href="/"},event_timeout:2e3})}}else showPopup("error","Bir hata oluştu. Lütfen tekrar deneyin");resetTurnstile()}}));