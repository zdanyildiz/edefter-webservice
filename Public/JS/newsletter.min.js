function resetTurnstile(){const turnstileContainerElement=document.getElementById("turnstile-container");if(typeof turnstile!=="undefined"&&turnstileContainerElement){try{console.log("Turnstile widget'ı sıfırlanıyor (#turnstile-container).");turnstile.reset(turnstileContainerElement)}catch(e){console.error("Turnstile sıfırlanırken hata oluştu:",e)}}}if(document.getElementById("newsletterForm")){document.getElementById("newsletterForm").addEventListener("submit",function(e){e.preventDefault();var form=e.target;if(form.namesurname.value===""||form.email.value===""){showPopup("error","Please fill in all fields.");return}var csrfToken=document.getElementById("csrf_token-newsletter-form").value;var cfTurnStile=document.getElementById("cf-token-newsletter-form").value;var formData=new FormData(form);var languageCode=document.documentElement.lang;formData.append("languageCode",languageCode);formData.append("csrf_token",csrfToken);formData.append("cf-token",cfTurnStile);var xhr=new XMLHttpRequest;xhr.open("POST","/?/control/form/post/newsletterForm",true);xhr.send(formData);xhr.onload=function(){if(xhr.status===200){var response=JSON.parse(xhr.responseText);if(response.status==="success"){showPopup("success",response.message);form.reset()}else{showPopup("error",response.message)}}resetTurnstile()}})}