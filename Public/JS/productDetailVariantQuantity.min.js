class ProductQuantity{maxQuantity;constructor(minQuantity,incrementQuantity,price,currencyCode,discount,campaignData){minQuantity=parseFloat(removeTrailingZeros(minQuantity));this.maxQuantity=1;incrementQuantity=parseFloat(removeTrailingZeros(incrementQuantity));price=price.replace(".","");price=price.replace(",",".");this.minQuantity=minQuantity;this.incrementQuantity=incrementQuantity;this.quantity=minQuantity;this.price=price;this.currencyCode=currencyCode;this.totalPriceContainer=document.querySelector(".product-total-price-container");this.productQuantityInput=document.getElementById("product-quantity");this.maxQuantity=this.productQuantityInput.getAttribute("data-max");this.discount=discount;this.campaignData=campaignData}increment(){var value=parseFloat(this.productQuantityInput.value);if(isNaN(value)){this.productQuantityInput.value=this.minQuantity}else{this.quantity=value+this.incrementQuantity;if(this.quantity>this.maxQuantity){this.quantity=this.maxQuantity}}this.quantity=parseFloat(this.quantity)}decrement(){var value=parseFloat(this.productQuantityInput.value);if(isNaN(value)){this.productQuantityInput.value=this.minQuantity}else{this.quantity=value-this.incrementQuantity}if(this.quantity<=this.minQuantity){this.quantity=this.minQuantity}this.quantity=parseFloat(this.quantity)}validate(){var value=parseFloat(this.productQuantityInput.value);if(value<this.minQuantity){return false}return true}updatePrice(){this.price=document.getElementById("productPriceInput").value;if(this.validate()){console.log("price: "+this.price);let totalPrice=parseFloat((this.quantity*this.price).toFixed(2));console.log("totalPrice: "+totalPrice);let discount=0;let campaignDiscount=this.getCampaignDiscount(totalPrice);discount=Math.max(discount,campaignDiscount);discount=parseFloat(discount.toFixed(2));let discountedPrice=totalPrice-discount;discountedPrice=formatPrice(discountedPrice);totalPrice=formatPrice(totalPrice);let priceContent="";if(discount>0){priceContent='<span class="totalPrice old">[_uyelik_sepettoplamtutar_yazi] '+this.currencyCode+" "+totalPrice.toLocaleString()+"</span> "+'<span class="discount">[_sepet_indirim_tutar_yazi] '+this.currencyCode+" "+discount.toLocaleString()+"</span> "+'<span class="discountedPrice">[_sepet_indiriml_toplam_tutar] '+this.currencyCode+" "+discountedPrice.toLocaleString()+"</span> "}else{priceContent='<span class="totalPrice">'+this.currencyCode+" "+totalPrice.toLocaleString()+"</span>"}this.totalPriceContainer.innerHTML=priceContent;console.log(typeof this.quantity);console.log(this.quantity);this.productQuantityInput.value=removeTrailingZeros(this.quantity.toFixed(4))}else{let totalPrice=(this.minQuantity*this.price).toFixed(2);this.totalPriceContainer.innerHTML=totalPrice.toLocaleString()+" "+this.currencyCode;this.productQuantityInput.value=this.minQuantity}}getCampaignDiscount(totalPrice){const campaignQuantityLimits=Object.keys(this.campaignData).sort((a,b)=>b-a);for(const quantityLimit of campaignQuantityLimits){if(this.quantity>=quantityLimit){return totalPrice*this.campaignData[quantityLimit]}}return 0}}let productQuantityIncrementButton=document.querySelector(".product-quantity-increment-button");if(productQuantityIncrementButton){document.querySelector(".product-quantity-increment-button").addEventListener("click",function(){productQuantity.increment();productQuantity.updatePrice()})}let productQuantityDecrementButton=document.querySelector(".product-quantity-decrement-button");if(productQuantityDecrementButton){document.querySelector(".product-quantity-decrement-button").addEventListener("click",function(){productQuantity.decrement();productQuantity.updatePrice()})}let productQuantityInput=document.querySelector("#product-quantity");if(productQuantityInput){document.querySelector("#product-quantity").addEventListener("change",function(){let thisValue=parseFloat(this.value);if(isNaN(thisValue)){thisValue=productQuantity.incrementQuantity;productQuantity.quantity=thisValue}productQuantity.quantity=thisValue+(productQuantity.incrementQuantity-thisValue%productQuantity.incrementQuantity);productQuantity.updatePrice()})}